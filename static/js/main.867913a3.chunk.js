(this.webpackJsonpcubesplit=this.webpackJsonpcubesplit||[]).push([[0],{38:function(e,t,a){e.exports=a(51)},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(31),c=a.n(r),m=(a(43),a(16)),o=a(12),i=a(6),s=(a(44),a(45),a(46),a(18)),u=a(37);new CustomEvent("moves",{detail:3});function d(e){var t=l.a.useRef(null),a=l.a.useState(null),n=Object(o.a)(a,2),r=n[0],c=n[1],m=l.a.useRef([]);return l.a.useEffect((function(){var e=new u.a(t.current,{alg:new s.a([])});console.log("New twisty2"),c(e)}),[]),l.a.useEffect((function(){if(null!==r){r.experimentalSetAlg(Object(s.c)(e.scramble)),m.current=[];var t,a=Object(i.a)(e.timelineSeq);try{for(a.s();!(t=a.n()).done;){var n=t.value;m.current.push(n)}}catch(o){a.e(o)}finally{a.f()}var l=null,c=setInterval((function(){var e=m.current[0];if((null===l&&(l=Date.now()),r&&e)&&Date.now()-l>=e.timeStamp){m.current.shift();var t=m.current[0];t?r.experimentalAddMove(e.move,Math.min(200,t.timeStamp-e.timeStamp)):r.experimentalAddMove(e.move,300)}}),20);return function(){return clearInterval(c)}}}),[r,e.counter]),l.a.createElement("div",{className:"twisty-wrapper"},l.a.createElement("div",{className:"twisty",ref:t}," "))}a(47);function v(e){for(var t=e.data,a=e.avg_data,n=e.time,r=-1,c=0,m=0,o=0;o<t.stages.length;o++)if(c+=t.stages[o].time,m+=t.stages[o].count,n<=c){r=o;break}var i=n>=c,s=function(e,t){var a=e-t,n=a/(t+1e-6),l=a<0?"":"+";return[l+=a.toFixed(2),n<-.1?"limegreen":n<0?"yellow":n<.1?"white":"red"]},u=[{name:"FB",stages:[0]},{name:"SB",stages:[1,2]},{name:"CMLL",stages:[3]},{name:"LSE",stages:[4,5]}],d=[{name:"F2B",stages:[0,1,2],span:2},{name:"L10P",stages:[3,4,5],span:2}],v=function(e,l){var m=e.name,o=e.stages,u=r;i&&(u=t.stages.length);var d,v=o.indexOf(u),g=0,f="white";if(-1!==v){for(var b=0;b<v;b++)g+=t.stages[o[b]].time;g+=t.stages[u].time-(c-n)}else if(o[0]>u)g=0;else{for(var E=0,p=0;p<o.length;p++)g+=t.stages[o[p]].time,E+=a[o[p]].time;var U=s(g,E);d=U[0],f=U[1]}return{name:m,step_time:g,delta_color:f,delta_time:d}},g=-1===r&&c+15>n?t.stages[t.stages.length-1]:t.stages[r],f=l.a.createElement("div",{className:"stageContainer"},l.a.createElement("div",{className:"stageName",style:{backgroundColor:(null===g||void 0===g?void 0:g.color)||"black"}},(null===g||void 0===g?void 0:g.name)||""),l.a.createElement("div",{className:"stageMoves"},(null===g||void 0===g?void 0:g.moves)||"")),b=l.a.createElement("div",{className:"stageContainer"},l.a.createElement("div",{className:"stageName",style:{backgroundColor:"silver",fontSize:30}},"Scramble"),l.a.createElement("div",{className:"stageMoves"},t.scramble));t.stages.map((function(e,t){if(t===r)e.time-(c-n),"";else if(-1===r||t<r){e.time;var m=s(e.time,a[t].time);m[0],m[1]}else"","";return l.a.createElement("div",{className:"party",key:t,style:{backgroundColor:e.color}},l.a.createElement("div",{className:"party-bar"},l.a.createElement("div",{className:"party-name"},e.name),l.a.createElement("div",{className:"party-stat"},"".concat(e.count," | ").concat(e.time.toFixed(2),"s | ").concat((e.count/e.time).toFixed(2),"tps"))),l.a.createElement("div",{className:"party-moves"},e.moves))}));return l.a.createElement("div",null,l.a.createElement("div",{className:"table"},n<0?b:f,l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null," ",l.a.createElement("td",{colSpan:4}," ",l.a.createElement("hr",null)," ")," "),0===t.stages.length||n<0?function(){var e=0,t=0;return u.map((function(a,n){var r=a.name,c=(a.stages,null);if(n===t){var m=d[e].span;t+=t+m,c=l.a.createElement("td",{className:"table-meta-td",rowSpan:m},"-"),e++}return l.a.createElement("tr",{key:n,className:"inactive"},l.a.createElement("td",{className:"table-name-td"},r," "),l.a.createElement("td",{className:"table-delta-td"}," "),l.a.createElement("td",{className:"table-time-td"}," - "),c)}))}():function(){var e=u.map(v),t=d.map(v),a=0,n=0;return e.map((function(e,r){var c=e.name,m=e.delta_color,o=e.delta_time,i=e.step_time,s=null;if(r===n){var u=d[a].span;n+=n+u,s=l.a.createElement("td",{className:"table-meta-td",rowSpan:u},t[a].step_time.toFixed(2)),a++}return l.a.createElement("tr",{key:r,className:"inactive"},l.a.createElement("td",{className:"table-name-td"},c," "),l.a.createElement("td",{className:"table-delta-td",style:{color:m}}," ",o," "),l.a.createElement("td",{className:"table-time-td"}," ","string"===typeof i?i:i.toFixed(2)," "),s)}))}()),l.a.createElement("tr",null," ",l.a.createElement("td",{colSpan:4}," ",l.a.createElement("hr",null)," ")," ")),l.a.createElement("div",null,l.a.createElement("div",{className:"time"}," ",(n<0?0:Math.min(n,c)).toFixed(2)," ")),l.a.createElement("div",null,l.a.createElement("div",{className:"moves"}," ",i&&m>0?"".concat(m," ETM, ").concat((m/c).toFixed(2)," ETPS"):""," ")),l.a.createElement("div",null)))}var g={starting_time:0,stages:[],scramble:""},f=[{stages:[{name:"FB",color:"#8b69db",moves:"l r U' x' D2' r' F'",time:1.16666666666667,count:7},{name:"SS",color:"#69bddb",moves:"R2 U M' U R U' r U r' U' r2",time:2,count:11},{name:"SP",color:"#699adb",moves:"U' R'",time:.2,count:2},{name:"CMLL",color:"#69db73",moves:"M' L' U' L U' L' U L U' L' U L U' L' U2 L",time:1.56666666666667,count:16},{name:"EOLRb",color:"#db9169",moves:"U' M' U2' M' U2' M U' M' U2' M2'",time:1.1,count:10},{name:"EP",color:"#d15e5e",moves:"U' M' U2' M' U2' M2'",time:.746666666666667,count:6}],starting_time:530/30,scramble:"D' F2 L2 U F2 U B2 L2 B2 F2 U' F' D' R F' L B L F2 D2 B' y"},{stages:[{name:"FB",color:"#8b69db",moves:"U' R' u U M' U' R B'",time:1.06666666666667,count:8},{name:"SS",color:"#69bddb",moves:"U R U' R' U2' r U r'",time:1.8,count:8},{name:"SP",color:"#699adb",moves:"U R' U2' R",time:.4,count:4},{name:"CMLL",color:"#69db73",moves:"M' U2 R U2' R2' F R F' U2' R' F R F'",time:1.56666666666667,count:13},{name:"EOLRb",color:"#db9169",moves:"U' M U' M' U M' U2' M'",time:1.03333333333333,count:8},{name:"EP",color:"#d15e5e",moves:"U' M2' U2' M U2' M'",time:.723333333333334,count:6}],starting_time:1300/30,scramble:"R2 U' R2 B2 L2 U R2 D B2 D B' L' U' B U' L F L F2 U' L2 y2"},{stages:[{name:"FB",color:"#8b69db",moves:"D' L' U2 L' D' R2 U R' U F'",time:1.56666666666667,count:10},{name:"SS",color:"#69bddb",moves:"U R U R U R2'",time:1.23333333333333,count:6},{name:"SP",color:"#699adb",moves:"U r",time:.266666666666667,count:2},{name:"CMLL",color:"#69db73",moves:"U2' R' F R U F U' R U R' U' F'",time:1.4,count:12},{name:"EOFBb",color:"#db9169",moves:"U2' M'",time:.533333333333333,count:2},{name:"EP",color:"#d15e5e",moves:"U' M' U2' M U2' M' U'",time:.76,count:7}],starting_time:2038/30,scramble:"L2 B2 U2 R2 B2 R2 U L2 D2 U B2 F L D2 U2 L' B U' F' R' D' z y"},{stages:[{name:"FB",color:"#8b69db",moves:"u r' B' r' F r F'",time:1.23333333333333,count:7},{name:"SS",color:"#69bddb",moves:"U' R' U R U R' U2' R2",time:1.2,count:8},{name:"SP",color:"#699adb",moves:"U2' M' U' r'",time:.4,count:4},{name:"CMLL",color:"#69db73",moves:"U2' F R' F' R U2 R U2' R'",time:1.56666666666667,count:9},{name:"EOLRb",color:"#db9169",moves:"M' U' M' U' M U' M' U' M2' U2' M2'",time:1.36666666666667,count:11},{name:"EP",color:"#d15e5e",moves:"U M' U2' M2' U2' M' U2' M2'",time:.793333333333332,count:8}],starting_time:2668/30,scramble:"D L2 F2 R2 D B2 D R2 D' U2 L2 F' D' L' D2 B' U F R B z y2"}],b=a(30);function E(e){var t=e.data,a=e.time,n=e.counter,r=l.a.useMemo((function(){var e,n=1e3*(t.starting_time-a),l=[],r=0,c=Object(i.a)(t.stages);try{for(c.s();!(e=c.n()).done;){var m=e.value,o=1e3*m.time,u=Object(s.c)(m.moves).nestedUnits;console.log(m,u);for(var d=Math.min(250,.3*o),v=0;v<u.length;v++){var g=u[v];l.push({move:g,timeStamp:r+d+(o-d)/u.length*v+n})}r+=o}}catch(f){c.e(f)}finally{c.f()}return l}),[t,n]);return l.a.createElement(d,{timelineSeq:r,counter:n,scramble:t.scramble})}var p=function(){var e=l.a.useState(25),t=Object(o.a)(e,2),a=t[0],r=t[1],c=l.a.useRef(null),s=l.a.useState(20),u=Object(o.a)(s,2),d=u[0],p=u[1],U=l.a.useState(.9),h=Object(o.a)(U,2),y=h[0],R=h[1],M=l.a.useState({l:10,r:10,u:10,d:20}),L=Object(o.a)(M,2),S=L[0],F=L[1],O=l.a.useState(1),N=Object(o.a)(O,2),x=N[0],j=N[1],w=l.a.useState(900),B=Object(o.a)(w,2),C=B[0],D=B[1],_=l.a.useState(.8),k=Object(o.a)(_,2),P=k[0],I=k[1],T=l.a.useState(JSON.stringify(f,null,2)),A=Object(o.a)(T,2),J=A[0],z=A[1],W=l.a.useState(f),q=Object(o.a)(W,2),V=q[0],$=q[1],G=l.a.useState(0),H=Object(o.a)(G,2),K=H[0],Q=H[1];Object(n.useEffect)((function(){var e=setInterval((function(){!function(){if(null!==c.current){var e=c.current;e&&e.duration>1&&r(e.currentTime)}}()}),30);return function(){return clearInterval(e)}}));var X=V.filter((function(e,t){return e.starting_time-5<=a})).pop()||g;Object(n.useEffect)((function(){Q(K+1)}),[X]);var Y=X?a-X.starting_time:0,Z=l.a.useMemo((function(){if(0===V.length)return[];var e,t=function(e){e.sort((function(e,t){return e-t}));for(var t=0,a=0;a<e.length;a++)t+=e[a];return e.length<=3?t/e.length:(t-e[0]-e[e.length-1])/(e.length-2)},a={},n=function(e){return"EOFBb"===e?"EOLRb":e},l=Object(i.a)(V[0].stages);try{for(l.s();!(e=l.n()).done;){a[n(e.value.name)]=[]}}catch(b){l.e(b)}finally{l.f()}console.log(a);var r,c=Object(i.a)(V);try{for(c.s();!(r=c.n()).done;){var m,o=r.value,s=Object(i.a)(o.stages);try{for(s.s();!(m=s.n()).done;){var u=m.value;a[n(u.name)].push(u.time)}}catch(b){s.e(b)}finally{s.f()}}}catch(b){c.e(b)}finally{c.f()}var d,v=[],g=Object(i.a)(V[0].stages);try{for(g.s();!(d=g.n()).done;){var f=d.value;v.push({name:n(f.name),time:t(a[n(f.name)])})}}catch(b){g.e(b)}finally{g.f()}return console.log("Session avg data",v),v}),[V]);return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"tableContainer",style:{top:"".concat(30+x,"px"),left:"".concat(30+d,"px"),transform:"scale(".concat(P,")"),width:300+S.l+S.r,height:720+S.u+S.d,backgroundColor:"rgba(0, 0, 0, ".concat(y,")")}},l.a.createElement("div",{style:{paddingLeft:S.l+"px",paddingRight:S.r+"px",paddingTop:S.u+"px",paddingBottom:S.d+"px"}},l.a.createElement(v,{data:X,avg_data:Z,time:Y,format:S}),l.a.createElement("div",{className:"cubeContainer"},l.a.createElement(E,{counter:K,data:X,time:a})))),l.a.createElement("div",{className:"videoContainer"},l.a.createElement("video",{controls:!0,height:C,width:1.8*C,ref:c})),l.a.createElement("div",{className:"panelContainer"},l.a.createElement("div",null,l.a.createElement(b.a,{onClick:function(){return Q(K+1)}}," Replay current solve ")),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(b.a,{onClick:function(){return $(JSON.parse(J))}}," Set data "),l.a.createElement("textarea",{rows:10,cols:80,onChange:function(e){return z(e.target.value)},value:J})),l.a.createElement("label",null,"Upload video:",l.a.createElement("input",{type:"file",onChange:function(e){!function(e){var t=new File([e],"videofile"),n=URL.createObjectURL(t);c.current&&(c.current.src=n,c.current.load(),c.current.currentTime=a)}(e.target.files[0])}}))),l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"x"},"x: ",d," "),l.a.createElement("input",{type:"range",min:0,max:2e3,value:d,onChange:function(e){p(e.target.value)}})),l.a.createElement("div",null,l.a.createElement("label",null,"y: ",x),l.a.createElement("input",{type:"range",min:0,max:1e3,value:x,onChange:function(e){j(e.target.value)}})),l.a.createElement("div",null,l.a.createElement("label",null," Video height:",C," "),l.a.createElement("input",{type:"range",min:400,max:1080,step:20,value:C,onChange:function(e){D(e.target.value)}})),l.a.createElement("div",null,l.a.createElement("label",null," Scale:",P),l.a.createElement("input",{type:"range",min:.1,max:2,value:P,step:.05,onChange:function(e){I(e.target.value)}})),l.a.createElement("div",null,l.a.createElement("label",null," alpha:",y," "),l.a.createElement("input",{type:"range",min:.1,max:1,value:y,step:.1,onChange:function(e){R(e.target.value)}})),l.a.createElement("div",null,l.a.createElement("label",null," Padding left: ",S.l," "),l.a.createElement("input",{type:"range",min:0,max:400,value:S.l,step:20,width:100,onChange:function(e){F(Object(m.a)(Object(m.a)({},S),{},{l:parseInt(e.target.value)}))}})),l.a.createElement("div",null,l.a.createElement("label",null," Padding right: ",S.r," "),l.a.createElement("input",{type:"range",min:0,max:400,value:S.r,step:20,width:100,onChange:function(e){F(Object(m.a)(Object(m.a)({},S),{},{r:parseInt(e.target.value)}))}})),l.a.createElement("div",null,l.a.createElement("label",null," Padding Top: ",S.u," "),l.a.createElement("input",{type:"range",min:0,max:400,value:S.u,step:20,onChange:function(e){F(Object(m.a)(Object(m.a)({},S),{},{u:parseInt(e.target.value)}))}})),l.a.createElement("div",null,l.a.createElement("label",null," Padding Bottom: ",S.d," "),l.a.createElement("input",{type:"range",min:0,max:400,value:S.d,step:20,onChange:function(e){F(Object(m.a)(Object(m.a)({},S),{},{d:parseInt(e.target.value)}))}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=a(33),h=a(36),y=a.n(h);c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(U.a,{theme:y.a},l.a.createElement(p,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.867913a3.chunk.js.map